{% extends 'base.html' %}
{% load static %}

{% block additional_css %}
{% endblock %}

{% block content %}

    <!--**********************************
        Content body start
    ***********************************-->
    <div class="content-body">
        <!-- row -->
        <div class="container-fluid">
            <!-- Row -->
            <div class="row">
                <div class="col-xl-12">
                    <div class="coin-warpper d-flex align-items-center justify-content-between flex-wrap">
                        <div>
                            <ul class="nav nav-pills">
                                <li class="nav-item">
                                    <a href="{% url 'financial_system:user_watchlist_view' %}"
                                       class="nav-link active ms-0" id="nav-trading-tab" type="button">
                                        Trading
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="{% url 'financial_system:news' %}" class="nav-link news" id="nav-news-tab"
                                       type="button">
                                        News
                                    </a>

                                </li>
                                <li class="nav-item">
                                    <a href="{% url 'financial_system:user_profile' %}" class="nav-link account"
                                       id="nav-account-tab" type="button">
                                        Account
                                    </a>

                                </li>
                                <li class="nav-item">
                                    <a href="{% url 'financial_system:user_watchlist_view' %}" class="nav-link market"
                                       id="nav-market-tab" type="button">
                                        Market
                                    </a>

                                </li>


                            </ul>
                        </div>
                        <div class="input-group search-area w-auto coin-tab-search mt-xl-0 mt-2">
                            <input type="text" class="form-control" placeholder="">
                            <span class="input-group-text"><a href="javascript:void(0)">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                 width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="svg-main-icon">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24"/>
                                    <path d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z"
                                          fill="var(--text-dark)" fill-rule="nonzero" opacity="0.3"/>
                                    <path d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z"
                                          fill="var(--text-dark)" fill-rule="nonzero"/>
                                </g>
                            </svg>
                        </a></span>
                        </div>
                    </div>
                </div>
                <div class="col-xl-12">
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="nav-bitcoin" role="tabpanel">
                            <div class="row">


                                <div class="col-xl-6 col-sm-12">
                                    <div class="card quick-trade">
                                        <div class="card-header pb-0 border-0 flex-wrap">
                                            <div>
                                                <h4 class="card-title">{{ stock.stock_name }} &nbsp; </h4>
                                                <p class="mb-xl-0 mb-3 fs-12"> {{ stock.closing_price_y }}</p>
                                            </div>
                                        </div>
                                        <div class="card-body pb-0">
                                            <div class="basic-form">
                                                <form action="{% url 'financial_system:sell_stock' %}" method="post"
                                                      class="form-wrapper trade-form">
                                                    {% csrf_token %}
                                                    <input type="hidden" name="stock_id" value="{{ stock.stock_id }}">
                                                    <div class="input-group mb-3 ">
                                                        <span class="input-group-text">PRICE</span>
                                                        <input class="form-control form-control text-end"
                                                               readonly="readonly" type="text"
                                                               value="{{ stock.closing_price_y }}"
                                                               placeholder="0,000000">
                                                    </div>
                                                    <div class="input-group mb-3 ">
                                                        <span class="input-group-text">Quantity</span>
                                                        <input name="quantity"
                                                               class="form-control form-control text-end" type="number"
                                                               placeholder="0,000000">
                                                    </div>

                                                    <div class="input-group mb-3 ">
                                                        <button type="submit"
                                                                class="btn d-flex  btn-success justify-content-between align-items-center w-100">
                                                            BUY
                                                            <svg width="16" height="16" viewBox="0 0 21 21"
                                                                 fill="none"
                                                                 xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M16.9638 11.5104L16.9721 14.9391L3.78954 1.7565C3.22815 1.19511 2.31799 1.19511 1.75661 1.7565C1.19522 2.31789 1.19522 3.22805 1.75661 3.78943L14.9392 16.972L11.5105 16.9637L11.5105 16.9637C10.7166 16.9619 10.0715 17.6039 10.0696 18.3978C10.0677 19.1919 10.7099 19.8369 11.5036 19.8388L11.5049 19.3388L11.5036 19.8388L18.3976 19.8554L18.4146 19.8555L18.4159 19.8555C18.418 19.8555 18.42 19.8555 18.422 19.8555C19.2131 19.8533 19.8528 19.2114 19.8555 18.4231C19.8556 18.4196 19.8556 18.4158 19.8556 18.4117L19.8389 11.5035L19.8389 11.5035C19.8369 10.7097 19.1919 10.0676 18.3979 10.0695C17.604 10.0713 16.9619 10.7164 16.9638 11.5103L16.9638 11.5104Z"
                                                                      fill="white" stroke="white"></path>
                                                            </svg>
                                                        </button>
                                                    </div>

                                                </form>
                                            </div>
                                        </div>

                                    </div>
                                </div>


{#                                <div class="col-xl-6 col-sm-12">#}
{#                                    <div class="card price-list">#}
{#                                        <div class="card-header border-0 p-3">#}
{#                                            <div>#}
{#                                                <h4 class="text-primary card-title">Buy 5</h4>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="card-body px-3 py-0">#}
{#                                            <div class="table-responsive">#}
{#                                                <table class="table text-center bg-primary-hover tr-rounded order-tbl mt-2 ">#}
{#                                                    <thead>#}
{#                                                    <tr>#}
{#                                                        <th class="text-start">Price</th>#}
{#                                                        <th class="text-center">Amount</th>#}
{#                                                        <th class="text-end">Total</th>#}
{#                                                    </tr>#}
{#                                                    </thead>#}
{#                                                    <tbody>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">82.3</td>#}
{#                                                        <td>0.15</td>#}
{#                                                        <td class="text-end">$134,12</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">83.9</td>#}
{#                                                        <td>0.18</td>#}
{#                                                        <td class="text-end">$237,31</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">84.2</td>#}
{#                                                        <td>0.25</td>#}
{#                                                        <td class="text-end">$252,58</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">86.2</td>#}
{#                                                        <td>0.35</td>#}
{#                                                        <td class="text-end">$126,26</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">91.6</td>#}
{#                                                        <td>0.75</td>#}
{#                                                        <td class="text-end">$46,92</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">92.6</td>#}
{#                                                        <td>0.21</td>#}
{#                                                        <td class="text-end">$123,27</td>#}
{#                                                    </tr>#}
{#                                                    </tbody>#}
{#                                                </table>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}


                                <div class="col-xl-6 col-sm-12">
                                    <div class="card quick-trade">
                                        <div class="card-header pb-0 border-0 flex-wrap">
                                            <div>
                                                <h4 class="card-title">{{ stock.stock_name }} &nbsp; </h4>
                                                <p class="mb-xl-0 mb-3 fs-12"> {{ stock.closing_price_y }}</p>
                                            </div>
                                        </div>
                                        <div class="card-body pb-0">
                                            <div class="basic-form">
                                                <form action="{% url 'financial_system:sell_stock' %}" method="post"
                                                      class="form-wrapper trade-form">
                                                    {% csrf_token %}
                                                    <input type="hidden" name="stock_id" value="{{ stock.stock_id }}">
                                                    <!-- Same assumption as above -->

                                                    <div class="input-group mb-3 ">
                                                        <span class="input-group-text">PRICE</span>
                                                        <input class="form-control form-control text-end"
                                                               readonly="readonly" type="text"
                                                               value="{{ stock.closing_price_y }}"
                                                               placeholder="0,000000">
                                                    </div>
                                                    <div class="input-group mb-3 ">
                                                        <span class="input-group-text">Quantity</span>
                                                        <input name="quantity"
                                                               class="form-control form-control text-end" type="number"
                                                               placeholder="0,000000">
                                                    </div>

                                                    <div class="input-group mb-3 ">
                                                        <a href="javascript:void(0);"
                                                           class="btn d-flex  btn-danger align-items-center justify-content-between w-100">
                                                            SELL
                                                            <svg class="scale3" width="16" height="16"
                                                                 viewBox="0 0 29 29"
                                                                 fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                <path d="M5.35182 13.4965L5.35182 13.4965L5.33512 6.58823C5.33508 6.5844 5.3351 6.58084 5.33514 6.57759M5.35182 13.4965L5.83514 6.58306L5.33514 6.58221C5.33517 6.56908 5.33572 6.55882 5.33597 6.5545L5.33606 6.55298C5.33585 6.55628 5.33533 6.56514 5.33516 6.57648C5.33515 6.57684 5.33514 6.57721 5.33514 6.57759M5.35182 13.4965C5.35375 14.2903 5.99878 14.9324 6.79278 14.9305C7.58669 14.9287 8.22874 14.2836 8.22686 13.4897L8.22686 13.4896L8.21853 10.0609M5.35182 13.4965L8.21853 10.0609M5.33514 6.57759C5.33752 5.789 5.97736 5.14667 6.76872 5.14454C6.77041 5.14452 6.77217 5.14451 6.77397 5.14451L6.77603 5.1445L6.79319 5.14456L13.687 5.16121L13.6858 5.66121L13.687 5.16121C14.4807 5.16314 15.123 5.80809 15.1211 6.6022C15.1192 7.3961 14.4741 8.03814 13.6802 8.03626L13.6802 8.03626L10.2515 8.02798L23.4341 21.2106C23.9955 21.772 23.9955 22.6821 23.4341 23.2435C22.8727 23.8049 21.9625 23.8049 21.4011 23.2435L8.21853 10.0609M5.33514 6.57759C5.33513 6.57959 5.33514 6.58159 5.33514 6.5836L8.21853 10.0609M6.77407 5.14454C6.77472 5.14454 6.77537 5.14454 6.77603 5.14454L6.77407 5.14454Z"
                                                                      fill="white" stroke="white"></path>
                                                            </svg>
                                                        </a>
                                                    </div>

                                                </form>
                                            </div>
                                        </div>

                                    </div>
                                </div>


{#                                <div class="col-xl-6 col-sm-12">#}
{#                                    <div class="card price-list">#}
{#                                        <div class="card-header border-0 p-3">#}
{#                                            <div>#}
{#                                                <h4 class="card-title text-danger">Sell 5</h4>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="card-body p-3 py-0">#}
{#                                            <div class="table-responsive">#}
{#                                                <table class="table text-center bg-warning-hover tr-rounded order-tbl mt-2">#}
{#                                                    <thead>#}
{#                                                    <tr>#}
{#                                                        <th class="text-start">Price</th>#}
{#                                                        <th class="text-center">Amount</th>#}
{#                                                        <th class="text-end">Total</th>#}
{#                                                    </tr>#}
{#                                                    </thead>#}
{#                                                    <tbody>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">82.3</td>#}
{#                                                        <td>0.15</td>#}
{#                                                        <td class="text-end">$134,12</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">83.9</td>#}
{#                                                        <td>0.18</td>#}
{#                                                        <td class="text-end">$237,31</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">84.2</td>#}
{#                                                        <td>0.25</td>#}
{#                                                        <td class="text-end">$252,58</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">86.2</td>#}
{#                                                        <td>0.35</td>#}
{#                                                        <td class="text-end">$126,26</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">91.6</td>#}
{#                                                        <td>0.75</td>#}
{#                                                        <td class="text-end">$46,92</td>#}
{#                                                    </tr>#}
{#                                                    <tr>#}
{#                                                        <td class="text-start">92.6</td>#}
{#                                                        <td>0.21</td>#}
{#                                                        <td class="text-end">$123,27</td>#}
{#                                                    </tr>#}
{#                                                    </tbody>#}
{#                                                </table>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--**********************************
        Content body end
    ***********************************-->

{% endblock %}

{% block additional_js %}
    <script>
        $(function () {
            var start = moment().subtract(29, 'days');
            var end = moment();

            function cb(start, end) {
                $('#reportrange span,#reportrange1 span,#reportrange2 span,#reportrange3 span,#reportrange4 span,#reportrange5 span').html(start.format('D MMMM YYYY') + ' &nbsp - &nbsp ' + end.format('D MMMM YYYY'));
            }

            $('#reportrange , #reportrange1,#reportrange2,#reportrange3,#reportrange4,#reportrange5').daterangepicker({
                startDate: start,
                endDate: end,
                ranges: {
                    'Today': [moment(), moment()],
                    'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                    'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                    'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                    'This Month': [moment().startOf('month'), moment().endOf('month')],
                    'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
                }
            }, cb);

            cb(start, end);


        });
    </script>
{% endblock %}