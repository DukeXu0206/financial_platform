{% extends "base.html" %}  <!-- Assuming you have a base template -->

{% block title %}Stock Market{% endblock %}

{% block content %}
<h1>Stock Market</h1>
<table>
    <thead>
    <tr>
        <th>Stock Name</th>
        <th>Issuance Time</th>
        <th>Yesterday's Closing Price</th>
        <th>Today's Opening Price</th>
        <th>Stock Type</th>
        <th>Block</th>
        <th>Change Extent</th>
    </tr>
    </thead>
    <tbody>
    {% for stock in stocks %}
    <tr data-url="{% url 'financial_system:stock_detail' stock_id=stock.stock_id %}">
        <td>{{ stock.stock_name }}</td>
        <td>{{ stock.issuance_time }}</td>
        <td>{{ stock.closing_price_y }}</td>
        <td>{{ stock.open_price_t }}</td>
        <td>{{ stock.stock_type }}</td>
        <td>{{ stock.block }}</td>
        <td>{{ stock.change_extent }}%</td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="7">No stocks found.</td>
    </tr>
    {% endfor %}

    </tbody>
</table>
{% endblock %}

{% block javascript %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const rows = document.querySelectorAll('table tbody tr');
    rows.forEach(row => {
        row.addEventListener('click', function() {
            window.location.href = this.dataset.url;
        });
    });
});
</script>
{% endblock %}

